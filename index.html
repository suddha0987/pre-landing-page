<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Email Verification</title>
</head>
<body>
<h2>Email Verification</h2>
<input type="email" id="email" placeholder="Enter your email" required />
<button id="submit">Submit</button>
<p id="msg" style="color:red;"></p>

<script>
const submitBtn = document.getElementById('submit');
const emailInput = document.getElementById('email');
const msg = document.getElementById('msg');

submitBtn.addEventListener('click', async () => {
    const email = emailInput.value.trim();
    if(!email) {
        msg.textContent = 'Email is required';
        return;
    }
    msg.textContent = 'Verifying...';

    try {
        const res = await fetch('/api/verify-email', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email })
        });
        const data = await res.json();
        if(data.ok){
            window.location.href = data.redirect;
        } else {
            msg.textContent = data.error || 'Invalid email';
        }
    } catch(e){
        msg.textContent = 'Something went wrong';
    }
});
</script>
</body>
</html>
